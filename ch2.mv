# Chapter 2: sequences and limits

<hint title="üì¶ Import libraries (click to open/close)">
```coq
Set Default Goal Selector "!".

Require Import Coq.Reals.Reals.
Require Import Waterproof.Tactics.
Require Import Waterproof.Notations.Common.
Require Import Waterproof.Notations.Reals.
Require Import Waterproof.Notations.Sets.
Require Import Waterproof.Chains.
Require Import Waterproof.Automation.
Require Import Waterproof.Libs.Analysis.Sequences.

Require Import Waterproof.Libs.Reals.

Waterproof Enable Automation RealsAndIntegers.
Waterproof Enable Automation Intuition.

Open Scope R_scope.
Open Scope subset_scope.

Hint Extern 0 => progress (unfold R_dist in *) : wp_reals.

Notation "'max(' x , y )" := (Rmax x y)
  (format "'max(' x ,  y ')'").
Notation "'min(' x , y )" := (Rmin x y)
  (format "'min(' x ,  y ')'").

Notation "'max' ( x , y )" := (Nat.max x y)
  (format "'max' '(' x ,  y ')'")  : nat_scope.
Notation "'min' ( x , y )" := (Nat.min x y)
  (format "'min' '(' x ,  y ')'") : nat_scope.

Waterproof Register Expand "‚ü∂";
  for converges_to;
  as "Definition of convergence".

Notation "'the' 'triangle' 'inequality'" := Rabs_triang.
Set Bullet Behavior "Waterproof Relaxed Subproofs".
```
</hint>

```coq
Section Ex_2_2_2.

Definition a (n : ‚Ñï) := (2*n + 1)/(5*n + 4).

Lemma ex_2_2_2_a :
 a ‚ü∂ (2/5).
Proof.
```
<input-area>
```coq

```
</input-area>
```coq
Qed.

End Ex_2_2_2.

```

In the exercise above, think about the definition of limit.
You can ask for `Help.` if you get stuck.

Remember that when choosing a natural number, such as `N`, it can be necessary to use the `%nat` notation, as in `N := (...)%nat`.

Below you will find a simple example of a more abstract proof that can guide you to solve the next exercise.

```coq
Section Order_limit_theorem.

Variable a : ‚Ñï ‚Üí ‚Ñù.
Variable b : ‚Ñï ‚Üí ‚Ñù.

Variable p : ‚Ñù.
Variable q : ‚Ñù.
```

The above says: let $a : \mathbb{N} \to \mathbb{R}$ and
$b : \mathbb{N} \to \mathbb{R}$ be sequences, and let $p, q \in \mathbb{R}$.

In the lemma below we introduce a real number $\alpha$ and a squence $ac(n) := \alpha a(n)$.
In the lemma we show that if $\alpha > 0$ and $a$ converges to $p$, then $\alpha a(n) \to \alpha p$.

In this way you can have a look both at the notation and how one can go about proving the statement. Hopefully this can be a helpful guide and a refresher to the syntax. Remember that you can click throught the steps of the proof and look at the remaining goals to prove in the Goals panel.

```coq
Variable Œ± : ‚Ñù.
Definition ac (n : ‚Ñï) := Œ± * a(n).

Lemma order_limit_theorem_product :
Œ± > 0 ‚áí (
a ‚ü∂ p ‚áí (
    ac ‚ü∂ (Œ± * p)
    )).
Proof.
Assume that Œ± > 0.
Assume that a ‚ü∂ p as (i).
We need to show that ‚àÄ Œµ > 0, ‚àÉ N1 ‚àà ‚Ñï, ‚àÄ n ‚â• N1, ÔΩúac(n) - (Œ± * p)ÔΩú < Œµ.
Take Œµ > 0.
Define Œµ1 := Œµ/Œ±.
It holds that Œµ1 > 0.
By (i) it holds that ‚àÉ Na ‚àà ‚Ñï, ‚àÄ n ‚â• Na, | a(n) - p | < Œµ1 as (ii).
Obtain such a Na.
Choose N1 := Na.
- Indeed, N1 ‚àà ‚Ñï.
- We need to show that ‚àÄ n ‚â• N1, ÔΩúac(n) - (Œ± * p)ÔΩú < Œµ.
  Take n ‚â• N1.
  It holds thatÔΩúac(n) - (Œ± * p)ÔΩú = ÔΩú(Œ± * a(n)) - (Œ± * p)ÔΩú.
  It holds that ÔΩú(Œ± * a(n)) - (Œ± * p)ÔΩú = Œ± * ÔΩúa(n) - pÔΩú.
  By (ii) it holds that (& Œ± * ÔΩúa(n) - pÔΩú < Œ± * (Œµ / Œ±) = Œµ).
  We conclude that ÔΩúac(n) - (Œ± * p)ÔΩú < Œµ.
Qed.
```

We will now define the sequence $c : \mathbb{N} \to \mathbb{R}$ by
$$c(n) = a(n) + b(n).$$
The lemma below now basically states if $a$ converges to $p$ and $b$ converges to $q$, then $c$ converges to $p + q$.

## Before you start, here are a few points of attention:

‚ö†Ô∏è When Waterproof remains stuck on "verified on line NN", it means that the step that's being taken around line NN is too large for Waterproof to verify. It tries but cannot find the reason. You then need to provide more information, or make a smaller step.

‚ö†Ô∏è Avoid using `N` and `N0` as variable names. Using these names usually gives problems later.

‚ö†Ô∏è When choosing a natural number, such as `N1`, it can be necessary to use the `%nat` notation, as in `N1 := (...)%nat` .

‚ö†Ô∏è Also in Waterproof, it can be useful to rename certain dummy variables in statements (for instance replacing `Œµ` by `Œµ1` in a statement of the form `‚àÄ Œµ1 > 0, ...`.

‚ö†Ô∏è You can use `the triangle inequality`.

```coq
Definition c (n : ‚Ñï) := a(n) + b(n).

Lemma order_limit_theorem_sum :
a ‚ü∂ p ‚áí (
    b ‚ü∂ q
    ‚áí c ‚ü∂ (p + q)).
Proof.
```
<input-area>
```coq

```
</input-area>
```coq
Qed.

End Order_limit_theorem.
```

You can use the space below to formalize additional exercises if you wish.
<input-area>
```coq
(* Type your additional exercises here *)
```
</input-area>